"use strict";(self.webpackChunkgeek_pc=self.webpackChunkgeek_pc||[]).push([[802],{3802:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(7257),s=n(7363),i=n(183),o=n(586),c=n(7633),a=n(3388),u=n(7962),h=n(1890),l=n(142),d=n(1752),f=n(7689),x=n(1087),Z=n(184),m=o.Z.Header,p=o.Z.Sider,g=(0,r.Pi)((function(){var e=(0,i.o)(),t=e.userStore,n=e.loginStore,r=e.channelStore;(0,s.useEffect)((function(){try{t.getUserInfo(),r.loadChannelList()}catch(e){}}),[t,r]);var g=(0,f.TH)().pathname,j=(0,f.s0)();return(0,Z.jsxs)(o.Z,{children:[(0,Z.jsxs)(m,{className:"header",children:[(0,Z.jsx)("div",{className:"logo"}),(0,Z.jsxs)("div",{className:"user-info",children:[(0,Z.jsx)("span",{className:"user-name",children:t.userInfo.name}),(0,Z.jsx)("span",{className:"user-logout",children:(0,Z.jsxs)(c.Z,{title:"\u662f\u5426\u786e\u8ba4\u9000\u51fa\uff1f",okText:"\u9000\u51fa",cancelText:"\u53d6\u6d88",onConfirm:function(){n.loginOut(),j("/login")},children:[(0,Z.jsx)(u.Z,{})," \u9000\u51fa"]})})]})]}),(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(p,{width:200,className:"site-layout-background",children:(0,Z.jsxs)(a.Z,{mode:"inline",theme:"dark",defaultSelectedKeys:[g],style:{height:"100%",borderRight:0},children:[(0,Z.jsx)(a.Z.Item,{icon:(0,Z.jsx)(h.Z,{}),children:(0,Z.jsx)(x.rU,{to:"/",children:"\u6570\u636e\u6982\u89c8"})},"1"),(0,Z.jsx)(a.Z.Item,{icon:(0,Z.jsx)(l.Z,{}),children:(0,Z.jsx)(x.rU,{to:"/article",children:"\u5185\u5bb9\u7ba1\u7406"})},"2"),(0,Z.jsx)(a.Z.Item,{icon:(0,Z.jsx)(d.Z,{}),children:(0,Z.jsx)(x.rU,{to:"/publish",children:"\u53d1\u5e03\u6587\u7ae0"})},"3")]})}),(0,Z.jsx)(o.Z,{className:"layout-content",style:{padding:20},children:(0,Z.jsx)(f.j3,{})})]})]})}))},183:function(e,t,n){n.d(t,{o:function(){return p}});var r=n(3144),s=n(5671),i=n(7363),o=n.n(i),c=n(4165),a=n(5861),u=n(4098),h=n(8881),l=(0,r.Z)((function e(){var t=this;(0,s.Z)(this,e),this.token=(0,h.LP)()||"",this.getToken=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(n){var r,s,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.mobile,s=n.code,e.next=3,h.dJ.post("http://geek.itheima.net/v1_0/authorizations",{mobile:r,code:s});case 3:i=e.sent,t.token=i.data.token,(0,h.o4)(t.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loginOut=function(){t.token="",(0,h.qz)()},(0,u.ky)(this)})),d=l,f=(0,r.Z)((function e(){var t=this;(0,s.Z)(this,e),this.userInfo={},this.getUserInfo=(0,a.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.dJ.get("/user/profile");case 2:n=e.sent,t.userInfo=n.data;case 4:case"end":return e.stop()}}),e)}))),(0,u.ky)(this)})),x=(0,r.Z)((function e(){var t=this;(0,s.Z)(this,e),this.channelList=[],this.loadChannelList=(0,a.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.dJ.get("/channels");case 2:n=e.sent,t.channelList=n.data.channels;case 4:case"end":return e.stop()}}),e)}))),(0,u.ky)(this)})),Z=(0,r.Z)((function e(){(0,s.Z)(this,e),this.loginStore=new d,this.userStore=new f,this.channelStore=new x})),m=o().createContext(new Z),p=function(){return o().useContext(m)}},8881:function(e,t,n){n.d(t,{qz:function(){return c},LP:function(){return i},dJ:function(){return u},o4:function(){return o}});var r=n(1243),s="geek_pc",i=function(){return localStorage.getItem(s)},o=function(e){return localStorage.setItem(s,e)},c=function(){return localStorage.removeItem(s)},a=n(6645),u=r.Z.create({baseURL:"http://geek.itheima.net/v1_0",timeout:5e3});u.interceptors.request.use((function(e){var t=i();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e.data}),(function(e){return 401===e.response.status&&a.m.push("/login"),Promise.reject(e)}))}}]);
//# sourceMappingURL=802.63e6c9e1.chunk.js.map